(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{"2MGU":function(t,i,e){"use strict";e.d(i,"a",function(){return p});var s=e("bb6g"),n=e("sF6c"),o=e("B161"),h=e("UXin"),r=e("6Mol"),a=e("cR8S"),l=e("8NCk"),p=function(t){function i(i){void 0===i&&(i={});var e=t.call(this,i)||this;return r.a.store("HalloweenMonster",e),e}return s.d(i,t),i.add=function(t){l.a.get("halloween-2019-opted-out")||a.a.isDesktop&&this.encounters.push(t)},i.remove=function(t){Object(n.e)(i.encounters,function(i){return i.id===t.id})},i.prototype.$capture=function(){return s.b(this,void 0,void 0,function(){var t;return s.e(this,function(i){switch(i.label){case 0:return[4,o.a.sendRequest("/web/halloween-2019/capture/"+this.id,null,{detach:!0,processPayload:!1})];case 1:if(!((t=i.sent())&&t.data&&t.data.payload&&t.data.payload.success))throw new Error("Failed to capture");return[2,t.data.payload]}})})},i.encounters=[],i}(h.a);h.a.create(p)},"34vh":function(t,i,e){"use strict";var s=e("X168");e.n(s).a},"8WUk":function(t,i,e){t.exports=e.p+"assets/zombie.00eb4774.png"},A55z:function(t,i,e){},VXky:function(t,i,e){t.exports=e.p+"assets/vampire.052647d3.png"},X168:function(t,i,e){},dANx:function(t,i,e){t.exports=e.p+"assets/pumpkin.1ceb9767.png"},dZHt:function(t,i,e){t.exports=e.p+"assets/witch.7f243f61.png"},nKqp:function(t,i,e){t.exports=e.p+"assets/candy.488ca1cf.png"},qIjv:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"-overlay",class:{"is-in-combat":this.isInCombat},on:{mousemove:this.mouseMove}},[i("div",{ref:"container",staticClass:"-overlay-content"},this._l(this.HalloweenMonster.encounters,function(t,e){return i("app-shell-halloween-monster",{key:e,attrs:{encounter:t}})}),1)])};s._withStripped=!0;var n=e("bb6g"),o=e("pLV6"),h=e("la05"),r=e("6tUf"),a=e("2MGU"),l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.monster?e("div",{staticClass:"overlay-monster select-disable",style:{left:t.monster.pos.x+"px",top:t.monster.pos.y+"px",width:t.monster.size*t.monster.width+"px",height:t.monster.size*t.monster.height+"px"}},[e("img",{staticClass:"select-disable",class:"monster-type-"+t.monster.model.type,style:{width:t.monster.size*t.monster.width+"px",height:t.monster.size*t.monster.height+"px",opacity:t.monster.opacity,webkitTransform:t.monsterTransform,transform:t.monsterTransform,mozTransform:t.monsterTransform,msTransform:t.monsterTransform,oTransform:t.monsterTransform},attrs:{src:t.monster.img,draggable:!1},on:{click:t.interact}}),t._v(" "),e("div",{staticClass:"overlay-monster-healthbar",style:{width:100*t.monster.health+"%",height:"5%",backgroundColor:"#ff9423",visibility:t.healthbarVisibility}})]):t._e()};l._withStripped=!0;var p=e("z1bh"),u=e("/l1O"),c=function(){function t(){}return t.show=function(t,i,s,o,h){return n.b(this,void 0,void 0,function(){return n.e(this,function(n){switch(n.label){case 0:return[4,u.a.show({modalId:"HalloweenMonster",component:function(){return Object(p.b)(e.e(28).then(e.bind(null,"aWDN")))},size:"lg",props:{avatar:t,userBreakdown:i,globalBreakdown:s,pun:o,mood:h}})];case 1:return[2,n.sent()]}})})},t}(),d=900;function f(t,i,e){return t+e*(i-t)}var m=function(){function t(t,i){var e=this;this.model=t,this.shell=i,this.rot=0,this.size=0,this.opacity=0,this.shake=0,this.health=1,this.interacted=!1,this.lifetime=d,this.interval=null,this.dedRequest=null,this.pos=this.getSpawnPoint(),this.destination=this.getDestination(),this.interval=setInterval(function(){e.update()},16)}return Object.defineProperty(t.prototype,"level",{get:function(){return this.model.user_level/100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invulnerable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 100},enumerable:!0,configurable:!0}),t.prototype.getRandomPosition=function(){return{x:Math.floor(Math.random()*(this.shell.containerWidth-2*this.width))+this.width,y:Math.floor(Math.random()*(this.shell.containerHeight-2*this.height))+this.height}},t.prototype.getSpawnPoint=function(){return this.getRandomPosition()},t.prototype.getDestination=function(){return this.getRandomPosition()},t.prototype.die=function(){this.dedRequest||(this.dedRequest=this.model.$capture())},t.prototype.remove=function(){return n.b(this,void 0,void 0,function(){var t,i;return n.e(this,function(e){switch(e.label){case 0:if(!this.interval)return[3,5];if(a.a.remove(this.model),this.shell.endCombat(),!(this.health<=0))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.dedRequest];case 2:return t=e.sent(),i=t.user,c.show(this.img,i.halloween_2019_breakdown[this.model.type],t.breakdown[this.model.type],t.pun,t.mood+" "+this.model.type),[3,4];case 3:return e.sent(),[3,4];case 4:clearInterval(this.interval),this.interval=null,e.label=5;case 5:return[2]}})})},t.prototype.grow=function(){if(this.lifetime<=0){if(this.size>0){var t=.01;this.size-=t,this.opacity-=t,this.pos.x+=t/2*this.width,this.pos.y+=t/2*this.height,this.size<=0&&this.remove()}}else if(this.size<1){t=.005;this.size+=t,this.opacity+=t,this.pos.x-=t/2*this.width,this.pos.y-=t/2*this.height,this.size>=1&&(this.size=1)}else this.lifetime>0&&this.lifetime--},t.prototype.clickAnimation=function(){this.size=.75,this.pos.x+=.125*this.width,this.pos.y+=.125*this.height,this.opacity=1},t}(),y=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return n.d(i,t),Object.defineProperty(i.prototype,"img",{get:function(){return e("nKqp")},enumerable:!0,configurable:!0}),i.prototype.interact=function(){this.health>0&&(this.interacted=!0,this.lifetime=d,this.health-=.2,this.destination=this.getDestination(),this.clickAnimation(),this.health<=.01&&(this.health=0,this.lifetime=0,this.die()))},i.prototype.update=function(){this.grow(),this.interacted&&this.health>0&&(this.shell.getMouseX()>this.pos.x-100&&this.shell.getMouseX()<this.pos.x+this.width+200&&this.shell.getMouseY()>this.pos.y-100&&this.shell.getMouseY()<this.pos.y+this.height+200&&Math.random()<.01+.01*this.level&&(this.destination=this.getDestination()),this.pos.x=f(this.destination.x,this.pos.x,.97),this.pos.y=f(this.destination.y,this.pos.y,.97)),this.shake++,this.rot=10*Math.sin(this.shake/10)},i}(m),g=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return n.d(i,t),Object.defineProperty(i.prototype,"img",{get:function(){return e("dANx")},enumerable:!0,configurable:!0}),i.prototype.interact=function(){this.health>0&&(this.interacted=!0,this.lifetime=d,this.health-=.2-.1*this.level,this.destination=this.getDestination(),this.clickAnimation(),this.health<=.01&&(this.health=0,this.lifetime=0,this.die()))},i.prototype.update=function(){this.grow(),this.interacted&&this.health>0&&(this.pos.x=f(this.destination.x,this.pos.x,.99-.01*this.level),this.pos.y=f(this.destination.y,this.pos.y,.99-.01*this.level),Math.abs(this.pos.x-this.destination.x)<50+30*this.level&&(this.destination.x=this.getDestination().x),Math.abs(this.pos.y-this.destination.y)<50+30*this.level&&(this.destination.y=this.getDestination().y)),this.shake++,this.rot=10*Math.sin(this.shake/10)},i}(m),b=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return n.d(i,t),Object.defineProperty(i.prototype,"img",{get:function(){return e("VXky")},enumerable:!0,configurable:!0}),i.prototype.interact=function(){this.health>0&&(this.interacted=!0,this.lifetime=d,this.health-=.1-.05*this.level,this.destination=this.getDestination(),this.clickAnimation(),this.health<=.01&&(this.health=0,this.lifetime=0,this.die()))},i.prototype.update=function(){this.grow(),this.interacted&&this.health>0&&(this.pos.x=f(this.destination.x,this.pos.x,.99-.01*this.level),this.pos.y=f(this.destination.y,this.pos.y,.99-.01*this.level),Math.abs(this.pos.x-this.destination.x)<50+30*this.level&&(this.destination.x=this.getDestination().x),Math.abs(this.pos.y-this.destination.y)<50+30*this.level&&(this.destination.y=this.getDestination().y)),this.shake++,this.rot=10*Math.sin(this.shake/10)},i}(m),v=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.leaving=!1,i.entering=!1,i.spawnSide=-1,i}return n.d(i,t),Object.defineProperty(i.prototype,"img",{get:function(){return e("dZHt")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"invulnerable",{get:function(){return this.leaving||this.entering},enumerable:!0,configurable:!0}),i.prototype.getSpawnPoint=function(){return this.getTargetPoint(-1)},i.prototype.getDestination=function(){return this.getTargetPoint(this.spawnSide)},i.prototype.getTargetPoint=function(t){var i=this.shell.containerWidth,e=i/10;return-1===t&&(Math.random()<.5?this.spawnSide=0:this.spawnSide=1),{x:0===this.spawnSide?Math.random()*e+this.width/2:i-Math.random()*e-this.width/2,y:this.getRandomPosition().y}},i.prototype.interact=function(){this.health>0&&!this.leaving&&!this.entering&&(this.interacted=!0,this.lifetime=d,this.health-=.2,this.destination=this.getDestination(),this.clickAnimation(),this.health<=.01?(this.health=0,this.lifetime=0,this.die()):Math.random()<.5+.3*this.level&&(this.leaving=!0,0===this.spawnSide?(this.destination.x=2*-this.width,this.spawnSide=1):(this.destination.x=this.shell.containerWidth+2*this.width,this.spawnSide=0),this.destination.y=this.pos.y))},i.prototype.update=function(){this.grow(),this.interacted&&this.health>0&&(this.pos.x=f(this.destination.x,this.pos.x,.99-.01*this.level),this.pos.y=f(this.destination.y,this.pos.y,.99-.01*this.level),this.leaving||this.entering||(Math.abs(this.pos.x-this.destination.x)<50+30*this.level&&(this.destination.x=this.getDestination().x),Math.abs(this.pos.y-this.destination.y)<50+30*this.level&&(this.destination.y=this.getDestination().y)),this.leaving&&Math.abs(this.pos.x-this.destination.x)<100&&(this.entering=!0,this.leaving=!1,this.lifetime=d,0===this.spawnSide?(this.pos.x=-this.width,this.destination.x=2*this.width):(this.pos.x=this.shell.containerWidth,this.destination.x=this.shell.containerWidth-2*this.width)),this.entering&&Math.abs(this.pos.x-this.destination.x)<50&&(this.entering=!1)),this.shake++,this.rot=10*Math.sin(this.shake/20)},i}(m),w=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.respawning=!1,i.respawned=!1,i}return n.d(i,t),Object.defineProperty(i.prototype,"img",{get:function(){return e("8WUk")},enumerable:!0,configurable:!0}),i.prototype.interact=function(){this.health>0&&!this.respawning&&(this.interacted=!0,this.lifetime=d,this.health-=.2-.05*this.level,this.destination=this.getDestination(),this.clickAnimation(),this.health<=.01?(this.health=0,this.lifetime=0,this.die()):Math.random()<=.3&&(this.respawning=!0))},i.prototype.update=function(){if(this.grow(),this.interacted&&this.health>0)if(this.respawning){if(this.respawned)this.size+=.02,this.pos.x-=.01*this.width,this.size>=1&&(this.size=1,this.respawned=!1,this.respawning=!1);else if(this.size-=.02,this.pos.x+=.01*this.width,this.size<=0){this.size=0;var t=this.getDestination();this.pos.x=t.x,this.pos.y=t.y,this.respawned=!0}}else this.pos.x<this.destination.x?(this.pos.x+=1+2*this.level,this.pos.x>=this.destination.x&&(this.pos.x=this.destination.x)):this.pos.x>this.destination.x&&(this.pos.x-=1+2*this.level,this.pos.x<=this.destination.x&&(this.pos.x=this.destination.x)),this.pos.y<this.destination.y?(this.pos.y+=1+2*this.level,this.pos.y>=this.destination.y&&(this.pos.y=this.destination.y)):this.pos.y>this.destination.y&&(this.pos.y-=1+2*this.level,this.pos.y<=this.destination.y&&(this.pos.y=this.destination.y)),this.pos.x===this.destination.x&&this.pos.y===this.destination.y&&(this.destination=this.getDestination());this.shake++,this.rot=10*Math.sin(this.shake/20)},i}(m),x=function(){function t(){}return t.create=function(t,i){switch(t.type){case"pumpkin":return new g(t,i);case"zombie":return new w(t,i);case"witch":return new v(t,i);case"candy":return new y(t,i);case"vampire":return new b(t,i)}},t}(),M=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.monster=null,i}return n.d(i,t),Object.defineProperty(i.prototype,"monsterTransform",{get:function(){var t="rotate("+this.monster.rot+"deg)";return this.monster.pos.x>this.monster.destination.x&&(t+=" scaleX(-1)"),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"healthbarVisibility",{get:function(){return this.monster.health<1&&this.monster.health>0&&!this.monster.invulnerable?"visible":"hidden"},enumerable:!0,configurable:!0}),i.prototype.created=function(){this.shell=Object(r.a)(this,D)},i.prototype.mounted=function(){var t=this;this.monster=x.create(this.encounter,this.shell),this.beforeEachDeregister=this.$router.beforeEach(function(i,e,s){t.remove(),s()})},i.prototype.destroyed=function(){this.beforeEachDeregister&&(this.beforeEachDeregister(),this.beforeEachDeregister=void 0)},i.prototype.remove=function(){this.monster&&(this.monster.remove(),this.monster=null)},i.prototype.interact=function(){this.shell.startCombat(),this.monster.interact()},n.c([Object(h.d)(Object)],i.prototype,"encounter",void 0),i=n.c([Object(h.a)({})],i)}(o.default),k=(e("34vh"),e("psIG")),z=Object(k.a)(M,l,[],!1,null,"0dc5ac07",null);z.options.__file="app/components/shell/halloween/monster/monster.vue";var j=z.exports,O=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.isInCombat=!1,i._mouseX=-1,i._mouseY=-1,i.HalloweenMonster=Object(r.c)(a.a),i}return n.d(i,t),Object.defineProperty(i.prototype,"containerWidth",{get:function(){return this.$refs.container.offsetWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"containerHeight",{get:function(){return this.$refs.container.offsetHeight},enumerable:!0,configurable:!0}),i.prototype.getMouseX=function(){return this._mouseX},i.prototype.getMouseY=function(){return this._mouseY},i.prototype.mouseMove=function(t){this._mouseX=t.clientX,this._mouseY=t.clientY},i.prototype.startCombat=function(){this.isInCombat=!0},i.prototype.endCombat=function(){this.isInCombat=!1},i=n.c([Object(h.a)({components:{AppShellHalloweenMonster:j}})],i)}(o.default),P=(e("uKl8"),Object(k.a)(O,s,[],!1,null,"dc585da2",null));P.options.__file="app/components/shell/halloween/halloween.vue";var D=i.default=P.exports},uKl8:function(t,i,e){"use strict";var s=e("A55z");e.n(s).a}}]);
//# sourceMappingURL=maps/210.a793a10a.map